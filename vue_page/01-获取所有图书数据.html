<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>获取所有图书数据</title>
    <link rel="stylesheet" href="css/main.css">
    <script src="./src/vue.js"></script>
    <script src="./src/axios.js"></script>
{#    <script src="./src/js.cookie.js"></script>#}
</head>
<body>
    <div id="app">
        <div class="title">英雄人物数据榜单</div>
        <table class="gridtable">
            <tr>
                <th>ID</th>
                <th>名称</th>
                <th>性别</th>
                <th>备注</th>
                <th>所属图书</th>
                <th>操作</th>
            </tr>
            <!-- TODO：展示获取到的所有英雄人物数据 -->
            <tr v-for="hero in heros">
                <td>{{ hero.id }}</td>
                <td>{{ hero.hname }}</td>
                <td>{{ hero.hgender }}</td>
                <td>{{ hero.hcomment }}</td>
                <td>{{ hero.hbook }}</td>
                <td><input type="button" value="删除数据" @click="delete_hero(hero.id)"></td>
            </tr>
        </table>
    </div>
</body>
<script>
    // 创建 Vue 对象
    var vm = new Vue({
        // 指定当前 Vue 对象控制的页面区域
        el: "#app",
        // 数据
        data: {
            heros: []
        },
        mounted: function() {
            // TODO：页面加载时，获取所有英雄人物数据
            axios.get("http://127.0.0.1:8000/heros/")
            .then(response =>{
                this.heros = response.data.heros;
            }).catch(error => {
                console.log(error)
            })
        },
        // 方法
        methods: {
            // TODO：获取所有英雄人物的数据
            get_all_heros:function () {
                axios.get("http://127.0.0.1:8000/heros/")
                .then(response => {
                    this.heros = response.data.heros;
                }).catch(error => {
                    console.log(error)
                })
            },
            // TODO：删除指定英雄人物的数据
            delete_hero:function (id) {
                axios.delete("http://127.0.0.1:8000/heros/"+id+'/')
                .then(response => {

                }).catch(error => {
                    console.log(error)
                })
            }
        }
    })
</script>
</html>
